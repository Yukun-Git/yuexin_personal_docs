# é£ä¹¦ç™»å½•é›†æˆå¼€å‘è®¡åˆ’ - ç¬¬5é˜¶æ®µï¼šç”Ÿäº§éƒ¨ç½²å’Œè¿ç»´ç®¡ç†

## ğŸ“‹ é˜¶æ®µæ¦‚è¿°

**ç›®æ ‡**ï¼šå®Œæˆç”Ÿäº§ç¯å¢ƒéƒ¨ç½²ã€ç”¨æˆ·ç®¡ç†ç•Œé¢ã€æ–‡æ¡£å’Œè¿ç»´å·¥å…·
**é¢„ä¼°æ—¶é—´**ï¼š2-3å¤©
**ä¼˜å…ˆçº§**ï¼šä¸­
**ä¾èµ–**ï¼šç¬¬1ã€2ã€3ã€4é˜¶æ®µå®Œæˆ

## ğŸ¯ é˜¶æ®µç›®æ ‡

- [ ] ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²æŒ‡å—å’Œè‡ªåŠ¨åŒ–
- [ ] ç®¡ç†å‘˜ç”¨æˆ·ç®¡ç†ç•Œé¢
- [ ] å®Œæ•´æŠ€æœ¯æ–‡æ¡£å’Œç”¨æˆ·æ‰‹å†Œ
- [ ] è¿ç»´å·¥å…·å’Œè„šæœ¬
- [ ] åŸ¹è®­ææ–™å’Œæœ€ä½³å®è·µ
- [ ] ä¸Šçº¿æ£€æŸ¥æ¸…å•å’Œå›æ»šæ–¹æ¡ˆ

## ğŸ“ è¯¦ç»†ä»»åŠ¡æ¸…å•

### ä»»åŠ¡1ï¼šç”Ÿäº§ç¯å¢ƒéƒ¨ç½²å’Œé…ç½® (1å¤©)

#### 1.1 åˆ›å»ºç”Ÿäº§ç¯å¢ƒé…ç½®
```bash
# deployment/production/feishu-config.yaml

# Copyright(c) 2025
# All rights reserved.
#
# Author: yukun.xing <xingyukun@gmail.com>
# Date:   2025/09/19

# é£ä¹¦ç™»å½•é›†æˆç”Ÿäº§ç¯å¢ƒé…ç½®

apiVersion: v1
kind: ConfigMap
metadata:
  name: feishu-config
  namespace: pigeon-web
data:
  # é£ä¹¦åº”ç”¨é…ç½®
  FEISHU_APP_ID: "${FEISHU_APP_ID}"
  FEISHU_REDIRECT_URI: "https://pigeon.company.com/auth/feishu/callback"
  FEISHU_AUTO_CREATE_USER: "true"
  FEISHU_DEFAULT_ROLES: "user"
  FEISHU_ALLOWED_DOMAINS: "company.com,subsidiary.com"

  # ç¼“å­˜é…ç½®
  FEISHU_CACHE_TTL_USER_INFO: "3600"
  FEISHU_CACHE_TTL_APP_TOKEN: "7200"

  # å®‰å…¨é…ç½®
  FEISHU_MAX_LOGIN_ATTEMPTS: "5"
  FEISHU_LOCKOUT_DURATION: "3600"
  FEISHU_RATE_LIMIT_MAX: "100"
  FEISHU_RATE_LIMIT_WINDOW: "60"

  # ç›‘æ§é…ç½®
  FEISHU_METRICS_ENABLED: "true"
  FEISHU_ALERT_WEBHOOK: "${FEISHU_ALERT_WEBHOOK}"

  # æ—¥å¿—é…ç½®
  FEISHU_LOG_LEVEL: "INFO"
  FEISHU_AUDIT_LOG_ENABLED: "true"

---
apiVersion: v1
kind: Secret
metadata:
  name: feishu-secrets
  namespace: pigeon-web
type: Opaque
data:
  FEISHU_APP_SECRET: "${FEISHU_APP_SECRET_BASE64}"
  FEISHU_ENCRYPT_KEY: "${FEISHU_ENCRYPT_KEY_BASE64}"
  FEISHU_VERIFICATION_TOKEN: "${FEISHU_VERIFICATION_TOKEN_BASE64}"
```

#### 1.2 åˆ›å»ºéƒ¨ç½²è„šæœ¬
```bash
#!/bin/bash

# deployment/scripts/deploy-feishu-integration.sh

# Copyright(c) 2025
# All rights reserved.
#
# Author: yukun.xing <xingyukun@gmail.com>
# Date:   2025/09/19

set -e

echo "ğŸš€ Deploying Feishu Login Integration to Production..."

# é…ç½®å˜é‡
NAMESPACE="pigeon-web"
APP_NAME="pigeon-web"
CONFIG_FILE="deployment/production/feishu-config.yaml"
BACKUP_DIR="backups/$(date +%Y%m%d_%H%M%S)"

# å‡½æ•°å®šä¹‰
check_prerequisites() {
    echo "ğŸ” Checking prerequisites..."

    # æ£€æŸ¥kubectl
    if ! command -v kubectl &> /dev/null; then
        echo "âŒ kubectl not found. Please install kubectl."
        exit 1
    fi

    # æ£€æŸ¥namespace
    if ! kubectl get namespace $NAMESPACE &> /dev/null; then
        echo "âŒ Namespace $NAMESPACE not found."
        exit 1
    fi

    # æ£€æŸ¥å¿…éœ€çš„ç¯å¢ƒå˜é‡
    required_vars=("FEISHU_APP_ID" "FEISHU_APP_SECRET" "FEISHU_ENCRYPT_KEY" "FEISHU_VERIFICATION_TOKEN")
    for var in "${required_vars[@]}"; do
        if [[ -z "${!var}" ]]; then
            echo "âŒ Environment variable $var is not set."
            exit 1
        fi
    done

    echo "âœ… Prerequisites check passed."
}

backup_current_config() {
    echo "ğŸ’¾ Creating backup of current configuration..."
    mkdir -p $BACKUP_DIR

    # å¤‡ä»½ç°æœ‰é…ç½®
    kubectl get configmap feishu-config -n $NAMESPACE -o yaml > $BACKUP_DIR/feishu-config.yaml 2>/dev/null || true
    kubectl get secret feishu-secrets -n $NAMESPACE -o yaml > $BACKUP_DIR/feishu-secrets.yaml 2>/dev/null || true

    echo "âœ… Backup created in $BACKUP_DIR"
}

apply_database_migrations() {
    echo "ğŸ—ƒï¸ Applying database migrations..."

    # åº”ç”¨é£ä¹¦ç›¸å…³çš„æ•°æ®åº“è¿ç§»
    kubectl exec -n $NAMESPACE deployment/$APP_NAME -- python -c "
from app import create_app
from app.extensions import db
from app.models.feishu.metrics import FeishuMetrics, FeishuOperationLog

app = create_app()
with app.app_context():
    db.create_all()
    print('Database tables created successfully')
"

    echo "âœ… Database migrations applied."
}

deploy_configuration() {
    echo "âš™ï¸ Deploying Feishu configuration..."

    # æ›¿æ¢ç¯å¢ƒå˜é‡å¹¶åº”ç”¨é…ç½®
    envsubst < $CONFIG_FILE | kubectl apply -f -

    echo "âœ… Configuration deployed."
}

update_application() {
    echo "ğŸ“¦ Updating application with Feishu integration..."

    # é‡å¯åº”ç”¨ä»¥åŠ è½½æ–°é…ç½®
    kubectl rollout restart deployment/$APP_NAME -n $NAMESPACE

    # ç­‰å¾…éƒ¨ç½²å®Œæˆ
    kubectl rollout status deployment/$APP_NAME -n $NAMESPACE --timeout=300s

    echo "âœ… Application updated."
}

run_health_checks() {
    echo "ğŸ¥ Running health checks..."

    # ç­‰å¾…åº”ç”¨å¯åŠ¨
    sleep 30

    # æ£€æŸ¥åº”ç”¨å¥åº·çŠ¶æ€
    APP_URL=$(kubectl get service $APP_NAME -n $NAMESPACE -o jsonpath='{.status.loadBalancer.ingress[0].ip}')
    if [[ -z "$APP_URL" ]]; then
        APP_URL="localhost:8080"  # fallback for port-forward testing
    fi

    # å¥åº·æ£€æŸ¥
    if curl -f -s "http://$APP_URL/api/v1/health" > /dev/null; then
        echo "âœ… Application health check passed."
    else
        echo "âŒ Application health check failed."
        exit 1
    fi

    # é£ä¹¦é›†æˆå¥åº·æ£€æŸ¥
    if curl -f -s "http://$APP_URL/api/v1/feishu-auth/health" > /dev/null; then
        echo "âœ… Feishu integration health check passed."
    else
        echo "âš ï¸ Feishu integration health check failed. Check configuration."
    fi
}

rollback() {
    echo "ğŸ”„ Rolling back deployment..."

    if [[ -f "$BACKUP_DIR/feishu-config.yaml" ]]; then
        kubectl apply -f $BACKUP_DIR/feishu-config.yaml
    fi

    if [[ -f "$BACKUP_DIR/feishu-secrets.yaml" ]]; then
        kubectl apply -f $BACKUP_DIR/feishu-secrets.yaml
    fi

    kubectl rollout undo deployment/$APP_NAME -n $NAMESPACE
    kubectl rollout status deployment/$APP_NAME -n $NAMESPACE --timeout=300s

    echo "âœ… Rollback completed."
}

# ä¸»éƒ¨ç½²æµç¨‹
main() {
    echo "ğŸ¯ Starting Feishu Integration Deployment"
    echo "Namespace: $NAMESPACE"
    echo "Timestamp: $(date)"
    echo ""

    # è®¾ç½®é”™è¯¯å¤„ç†
    trap 'echo "âŒ Deployment failed. Rolling back..."; rollback; exit 1' ERR

    check_prerequisites
    backup_current_config
    apply_database_migrations
    deploy_configuration
    update_application
    run_health_checks

    echo ""
    echo "ğŸ‰ Feishu Integration Deployment Completed Successfully!"
    echo "Backup location: $BACKUP_DIR"
    echo ""
    echo "ğŸ“‹ Post-deployment checklist:"
    echo "1. Verify Feishu login functionality"
    echo "2. Check monitoring dashboards"
    echo "3. Review application logs"
    echo "4. Test user synchronization"
    echo "5. Validate security settings"
}

# æ”¯æŒå‘½ä»¤è¡Œå‚æ•°
case "${1:-deploy}" in
    deploy)
        main
        ;;
    rollback)
        if [[ -z "$2" ]]; then
            echo "Usage: $0 rollback <backup_directory>"
            exit 1
        fi
        BACKUP_DIR="$2"
        rollback
        ;;
    health-check)
        run_health_checks
        ;;
    *)
        echo "Usage: $0 {deploy|rollback|health-check}"
        exit 1
        ;;
esac
```

#### 1.3 åˆ›å»ºç›‘æ§å’Œå‘Šè­¦é…ç½®
```yaml
# deployment/monitoring/feishu-alerts.yaml

# Copyright(c) 2025
# All rights reserved.
#
# Author: yukun.xing <xingyukun@gmail.com>
# Date:   2025/09/19

apiVersion: monitoring.coreos.com/v1
kind: PrometheusRule
metadata:
  name: feishu-integration-alerts
  namespace: pigeon-web
  labels:
    app: pigeon-web
    component: feishu-integration
spec:
  groups:
  - name: feishu.rules
    rules:
    - alert: FeishuLoginFailureRateHigh
      expr: feishu_login_failure_rate > 0.1
      for: 5m
      labels:
        severity: warning
        service: feishu-integration
      annotations:
        summary: "Feishu login failure rate is high"
        description: "Feishu login failure rate is {{ $value | humanizePercentage }} for the last 5 minutes"

    - alert: FeishuAPIResponseTimeSlow
      expr: feishu_api_response_time_avg > 5000
      for: 2m
      labels:
        severity: error
        service: feishu-integration
      annotations:
        summary: "Feishu API response time is slow"
        description: "Feishu API average response time is {{ $value }}ms for the last 2 minutes"

    - alert: FeishuTokenRefreshFailureHigh
      expr: feishu_token_refresh_failure_rate > 0.05
      for: 3m
      labels:
        severity: warning
        service: feishu-integration
      annotations:
        summary: "Feishu token refresh failure rate is high"
        description: "Token refresh failure rate is {{ $value | humanizePercentage }}"

    - alert: FeishuIntegrationDown
      expr: up{job="feishu-integration"} == 0
      for: 1m
      labels:
        severity: critical
        service: feishu-integration
      annotations:
        summary: "Feishu integration service is down"
        description: "Feishu integration service has been down for more than 1 minute"

    - alert: FeishuAPIQuotaHigh
      expr: feishu_api_quota_usage_rate > 0.8
      for: 5m
      labels:
        severity: warning
        service: feishu-integration
      annotations:
        summary: "Feishu API quota usage is high"
        description: "API quota usage is {{ $value | humanizePercentage }}, approaching limit"

---
apiVersion: v1
kind: ConfigMap
metadata:
  name: feishu-grafana-dashboard
  namespace: pigeon-web
data:
  dashboard.json: |
    {
      "dashboard": {
        "title": "Feishu Integration Monitoring",
        "panels": [
          {
            "title": "Login Success Rate",
            "type": "stat",
            "targets": [
              {
                "expr": "feishu_login_success_rate",
                "legendFormat": "Success Rate"
              }
            ]
          },
          {
            "title": "API Response Time",
            "type": "graph",
            "targets": [
              {
                "expr": "feishu_api_response_time_avg",
                "legendFormat": "Average Response Time"
              }
            ]
          },
          {
            "title": "Active Users",
            "type": "stat",
            "targets": [
              {
                "expr": "feishu_active_users_total",
                "legendFormat": "Active Users"
              }
            ]
          }
        ]
      }
    }
```

**âœ… é˜¶æ®µæµ‹è¯•1ï¼šéƒ¨ç½²éªŒè¯**
```bash
#!/bin/bash
# deployment/scripts/test-deployment.sh

# Copyright(c) 2025
# All rights reserved.
#
# Author: yukun.xing <xingyukun@gmail.com>
# Date:   2025/09/19

echo "ğŸ§ª Testing Feishu Integration Deployment..."

# è®¾ç½®æµ‹è¯•ç¯å¢ƒå˜é‡
export FEISHU_APP_ID="cli_test123456"
export FEISHU_APP_SECRET="test_secret"
export FEISHU_ENCRYPT_KEY="test_encrypt_key"
export FEISHU_VERIFICATION_TOKEN="test_verification_token"

# 1. æµ‹è¯•é…ç½®éªŒè¯
echo "1ï¸âƒ£ Testing configuration validation..."
if ./deployment/scripts/deploy-feishu-integration.sh health-check; then
    echo "âœ… Configuration validation passed"
else
    echo "âŒ Configuration validation failed"
    exit 1
fi

# 2. æµ‹è¯•APIç«¯ç‚¹
echo "2ï¸âƒ£ Testing API endpoints..."
APP_URL="http://localhost:5000"  # æœ¬åœ°æµ‹è¯•

endpoints=(
    "/api/v1/health"
    "/api/v1/feishu-auth/health"
    "/api/v1/feishu-auth/authorize"
)

for endpoint in "${endpoints[@]}"; do
    if curl -f -s "$APP_URL$endpoint" > /dev/null; then
        echo "âœ… $endpoint is accessible"
    else
        echo "âŒ $endpoint is not accessible"
    fi
done

# 3. æµ‹è¯•æ•°æ®åº“è¿æ¥
echo "3ï¸âƒ£ Testing database connectivity..."
python3 -c "
from app import create_app
from app.extensions import db
app = create_app()
with app.app_context():
    try:
        db.session.execute('SELECT 1')
        print('âœ… Database connection successful')
    except Exception as e:
        print(f'âŒ Database connection failed: {e}')
        exit(1)
"

# 4. æµ‹è¯•ç¼“å­˜è¿æ¥
echo "4ï¸âƒ£ Testing cache connectivity..."
python3 -c "
from app import create_app
from app.extensions import cache
app = create_app()
with app.app_context():
    try:
        cache.ping()
        print('âœ… Cache connection successful')
    except Exception as e:
        print(f'âŒ Cache connection failed: {e}')
        exit(1)
"

echo "ğŸ‰ Deployment test completed successfully!"
```

### ä»»åŠ¡2ï¼šç®¡ç†å‘˜ç”¨æˆ·ç®¡ç†ç•Œé¢ (1å¤©)

#### 2.1 åˆ›å»ºé£ä¹¦ç”¨æˆ·ç®¡ç†é¡µé¢
```typescript
// frontend/src/pages/system/feishu/FeishuUserManagement.tsx

/*
 * Copyright(c) 2025
 * All rights reserved.
 *
 * Author: yukun.xing <xingyukun@gmail.com>
 * Date:   2025/09/19
 */

import React, { useState } from 'react';
import {
  Card, Table, Button, Space, Tag, Tooltip, Modal, Form,
  Input, Select, DatePicker, Statistic, Row, Col, Alert,
  Typography, Divider, Switch, message
} from 'antd';
import {
  UserOutlined, SyncOutlined, SettingOutlined,
  ExclamationCircleOutlined, ReloadOutlined
} from '@ant-design/icons';
import { useFeishuUserManagement } from '../../../hooks/useFeishuUserManagement';

const { Title, Text } = Typography;
const { RangePicker } = DatePicker;
const { confirm } = Modal;

interface FeishuUser {
  id: string;
  username: string;
  email: string;
  full_name: string;
  avatar_url?: string;
  auth_provider: 'feishu';
  feishu_info: {
    user_id: string;
    name: string;
    en_name?: string;
    email?: string;
    mobile?: string;
    department_ids?: string[];
    union_id?: string;
    open_id?: string;
  };
  last_feishu_sync?: string;
  is_active: boolean;
  created_at: string;
  last_login?: string;
}

const FeishuUserManagement: React.FC = () => {
  const [selectedRowKeys, setSelectedRowKeys] = useState<string[]>([]);
  const [configModalVisible, setConfigModalVisible] = useState(false);
  const [syncModalVisible, setSyncModalVisible] = useState(false);

  const {
    users,
    loading,
    statistics,
    configuration,
    syncUser,
    batchSyncUsers,
    updateConfiguration,
    refreshUsers
  } = useFeishuUserManagement();

  const columns = [
    {
      title: 'User',
      key: 'user',
      render: (record: FeishuUser) => (
        <Space>
          <img
            src={record.avatar_url || record.feishu_info?.avatar_url}
            alt={record.full_name}
            style={{ width: 32, height: 32, borderRadius: '50%' }}
            onError={(e) => {
              (e.target as HTMLImageElement).src = '/default-avatar.png';
            }}
          />
          <div>
            <div style={{ fontWeight: 'bold' }}>{record.full_name}</div>
            <Text type="secondary">{record.email}</Text>
          </div>
        </Space>
      ),
    },
    {
      title: 'Feishu Info',
      key: 'feishu_info',
      render: (record: FeishuUser) => (
        <div>
          <div>ID: <Text code>{record.feishu_info.user_id}</Text></div>
          {record.feishu_info.en_name && (
            <div>EN: {record.feishu_info.en_name}</div>
          )}
          {record.feishu_info.mobile && (
            <div>Mobile: {record.feishu_info.mobile}</div>
          )}
        </div>
      ),
    },
    {
      title: 'Departments',
      dataIndex: ['feishu_info', 'department_ids'],
      render: (departments: string[]) => (
        <div>
          {departments?.map(dept => (
            <Tag key={dept} size="small">{dept}</Tag>
          ))}
        </div>
      ),
    },
    {
      title: 'Status',
      key: 'status',
      render: (record: FeishuUser) => (
        <Space direction="vertical" size="small">
          <Tag color={record.is_active ? 'green' : 'red'}>
            {record.is_active ? 'Active' : 'Inactive'}
          </Tag>
          {record.last_feishu_sync && (
            <Tooltip title={`Last sync: ${new Date(record.last_feishu_sync).toLocaleString()}`}>
              <Tag color="blue" size="small">Synced</Tag>
            </Tooltip>
          )}
        </Space>
      ),
    },
    {
      title: 'Last Login',
      dataIndex: 'last_login',
      render: (date: string) => date ? new Date(date).toLocaleDateString() : 'Never',
    },
    {
      title: 'Actions',
      key: 'actions',
      render: (record: FeishuUser) => (
        <Space>
          <Button
            type="link"
            icon={<SyncOutlined />}
            onClick={() => handleSyncUser(record.id)}
            loading={loading}
          >
            Sync
          </Button>
          <Button
            type="link"
            danger
            onClick={() => handleDeactivateUser(record.id)}
          >
            Deactivate
          </Button>
        </Space>
      ),
    },
  ];

  const handleSyncUser = async (userId: string) => {
    try {
      await syncUser(userId);
      message.success('User synced successfully');
    } catch (error: any) {
      message.error(`Sync failed: ${error.message}`);
    }
  };

  const handleBatchSync = () => {
    if (selectedRowKeys.length === 0) {
      message.warning('Please select users to sync');
      return;
    }

    confirm({
      title: 'Batch Sync Users',
      content: `Are you sure you want to sync ${selectedRowKeys.length} users with Feishu?`,
      icon: <ExclamationCircleOutlined />,
      async onOk() {
        try {
          await batchSyncUsers(selectedRowKeys);
          message.success(`${selectedRowKeys.length} users synced successfully`);
          setSelectedRowKeys([]);
        } catch (error: any) {
          message.error(`Batch sync failed: ${error.message}`);
        }
      },
    });
  };

  const handleDeactivateUser = (userId: string) => {
    confirm({
      title: 'Deactivate User',
      content: 'Are you sure you want to deactivate this user?',
      danger: true,
      async onOk() {
        try {
          // Call deactivate API
          message.success('User deactivated successfully');
          refreshUsers();
        } catch (error: any) {
          message.error(`Deactivation failed: ${error.message}`);
        }
      },
    });
  };

  const ConfigurationModal = () => (
    <Modal
      title="Feishu Integration Configuration"
      open={configModalVisible}
      onCancel={() => setConfigModalVisible(false)}
      footer={null}
      width={600}
    >
      <Form
        layout="vertical"
        initialValues={configuration}
        onFinish={async (values) => {
          try {
            await updateConfiguration(values);
            message.success('Configuration updated successfully');
            setConfigModalVisible(false);
          } catch (error: any) {
            message.error(`Configuration update failed: ${error.message}`);
          }
        }}
      >
        <Form.Item
          name="auto_create_user"
          label="Auto Create User"
          valuePropName="checked"
        >
          <Switch />
        </Form.Item>

        <Form.Item
          name="allowed_domains"
          label="Allowed Email Domains"
          help="Comma-separated list of allowed email domains"
        >
          <Input placeholder="company.com,subsidiary.com" />
        </Form.Item>

        <Form.Item
          name="default_roles"
          label="Default Roles"
          help="Default roles assigned to new Feishu users"
        >
          <Select mode="multiple" placeholder="Select default roles">
            <Select.Option value="user">User</Select.Option>
            <Select.Option value="viewer">Viewer</Select.Option>
            <Select.Option value="admin">Admin</Select.Option>
          </Select>
        </Form.Item>

        <Form.Item
          name="sync_frequency"
          label="Sync Frequency (hours)"
        >
          <Input type="number" min={1} max={168} />
        </Form.Item>

        <Form.Item>
          <Space>
            <Button type="primary" htmlType="submit">
              Update Configuration
            </Button>
            <Button onClick={() => setConfigModalVisible(false)}>
              Cancel
            </Button>
          </Space>
        </Form.Item>
      </Form>
    </Modal>
  );

  return (
    <div style={{ padding: '24px' }}>
      <Title level={2}>
        <UserOutlined /> Feishu User Management
      </Title>

      {/* Statistics */}
      <Row gutter={16} style={{ marginBottom: '24px' }}>
        <Col span={6}>
          <Card>
            <Statistic
              title="Total Feishu Users"
              value={statistics?.total_users || 0}
              prefix={<UserOutlined />}
            />
          </Card>
        </Col>
        <Col span={6}>
          <Card>
            <Statistic
              title="Active Users"
              value={statistics?.active_users || 0}
              valueStyle={{ color: '#3f8600' }}
            />
          </Card>
        </Col>
        <Col span={6}>
          <Card>
            <Statistic
              title="Recent Logins (7d)"
              value={statistics?.recent_logins || 0}
              valueStyle={{ color: '#1890ff' }}
            />
          </Card>
        </Col>
        <Col span={6}>
          <Card>
            <Statistic
              title="Sync Failures"
              value={statistics?.sync_failures || 0}
              valueStyle={{ color: statistics?.sync_failures ? '#cf1322' : undefined }}
            />
          </Card>
        </Col>
      </Row>

      {/* Alerts */}
      {statistics?.sync_failures > 0 && (
        <Alert
          type="warning"
          message="Sync Issues Detected"
          description={`${statistics.sync_failures} users have sync failures. Please check the logs and retry synchronization.`}
          showIcon
          style={{ marginBottom: '16px' }}
        />
      )}

      {/* Actions */}
      <Card style={{ marginBottom: '16px' }}>
        <Space>
          <Button
            type="primary"
            icon={<SyncOutlined />}
            onClick={handleBatchSync}
            disabled={selectedRowKeys.length === 0}
          >
            Batch Sync ({selectedRowKeys.length})
          </Button>
          <Button
            icon={<ReloadOutlined />}
            onClick={refreshUsers}
            loading={loading}
          >
            Refresh
          </Button>
          <Button
            icon={<SettingOutlined />}
            onClick={() => setConfigModalVisible(true)}
          >
            Configuration
          </Button>
        </Space>
      </Card>

      {/* User Table */}
      <Card>
        <Table
          columns={columns}
          dataSource={users}
          loading={loading}
          rowKey="id"
          rowSelection={{
            selectedRowKeys,
            onChange: setSelectedRowKeys,
          }}
          pagination={{
            total: users?.length || 0,
            pageSize: 20,
            showSizeChanger: true,
            showTotal: (total, range) =>
              `${range[0]}-${range[1]} of ${total} users`,
          }}
        />
      </Card>

      <ConfigurationModal />
    </div>
  );
};

export default FeishuUserManagement;
```

#### 2.2 åˆ›å»ºç®¡ç†Hook
```typescript
// frontend/src/hooks/useFeishuUserManagement.ts

/*
 * Copyright(c) 2025
 * All rights reserved.
 *
 * Author: yukun.xing <xingyukun@gmail.com>
 * Date:   2025/09/19
 */

import { useState, useEffect, useCallback } from 'react';
import { feishuManagementApi } from '../api/feishuManagementApi';

interface FeishuStatistics {
  total_users: number;
  active_users: number;
  recent_logins: number;
  sync_failures: number;
  last_sync: string;
}

interface FeishuConfiguration {
  auto_create_user: boolean;
  allowed_domains: string;
  default_roles: string[];
  sync_frequency: number;
}

export const useFeishuUserManagement = () => {
  const [users, setUsers] = useState([]);
  const [loading, setLoading] = useState(false);
  const [statistics, setStatistics] = useState<FeishuStatistics | null>(null);
  const [configuration, setConfiguration] = useState<FeishuConfiguration | null>(null);

  const fetchUsers = useCallback(async () => {
    setLoading(true);
    try {
      const response = await feishuManagementApi.getUsers();
      setUsers(response.data);
    } catch (error) {
      console.error('Failed to fetch users:', error);
    } finally {
      setLoading(false);
    }
  }, []);

  const fetchStatistics = useCallback(async () => {
    try {
      const response = await feishuManagementApi.getStatistics();
      setStatistics(response.data);
    } catch (error) {
      console.error('Failed to fetch statistics:', error);
    }
  }, []);

  const fetchConfiguration = useCallback(async () => {
    try {
      const response = await feishuManagementApi.getConfiguration();
      setConfiguration(response.data);
    } catch (error) {
      console.error('Failed to fetch configuration:', error);
    }
  }, []);

  const syncUser = useCallback(async (userId: string) => {
    await feishuManagementApi.syncUser(userId);
    await fetchUsers();
    await fetchStatistics();
  }, [fetchUsers, fetchStatistics]);

  const batchSyncUsers = useCallback(async (userIds: string[]) => {
    await feishuManagementApi.batchSyncUsers(userIds);
    await fetchUsers();
    await fetchStatistics();
  }, [fetchUsers, fetchStatistics]);

  const updateConfiguration = useCallback(async (config: FeishuConfiguration) => {
    await feishuManagementApi.updateConfiguration(config);
    await fetchConfiguration();
  }, [fetchConfiguration]);

  const refreshUsers = useCallback(() => {
    fetchUsers();
    fetchStatistics();
  }, [fetchUsers, fetchStatistics]);

  useEffect(() => {
    fetchUsers();
    fetchStatistics();
    fetchConfiguration();
  }, [fetchUsers, fetchStatistics, fetchConfiguration]);

  return {
    users,
    loading,
    statistics,
    configuration,
    syncUser,
    batchSyncUsers,
    updateConfiguration,
    refreshUsers
  };
};
```

**âœ… é˜¶æ®µæµ‹è¯•2ï¼šç®¡ç†ç•Œé¢éªŒè¯**
```typescript
// frontend/src/tests/pages/FeishuUserManagement.test.tsx

import React from 'react';
import { render, screen, fireEvent, waitFor } from '@testing-library/react';
import { Provider } from 'react-redux';
import FeishuUserManagement from '../../pages/system/feishu/FeishuUserManagement';
import { mockStore } from '../testUtils';

// Mock the management hook
jest.mock('../../hooks/useFeishuUserManagement', () => ({
  useFeishuUserManagement: jest.fn(() => ({
    users: [
      {
        id: '1',
        username: 'testuser',
        email: 'test@company.com',
        full_name: 'Test User',
        auth_provider: 'feishu',
        feishu_info: {
          user_id: 'ou_123456',
          name: 'Test User',
          email: 'test@company.com'
        },
        is_active: true,
        created_at: '2025-01-01T00:00:00Z'
      }
    ],
    loading: false,
    statistics: {
      total_users: 1,
      active_users: 1,
      recent_logins: 1,
      sync_failures: 0
    },
    configuration: {
      auto_create_user: true,
      allowed_domains: 'company.com',
      default_roles: ['user'],
      sync_frequency: 24
    },
    syncUser: jest.fn(),
    batchSyncUsers: jest.fn(),
    updateConfiguration: jest.fn(),
    refreshUsers: jest.fn()
  }))
}));

describe('FeishuUserManagement', () => {
  const renderWithProviders = (component: React.ReactElement) => {
    return render(
      <Provider store={mockStore}>
        {component}
      </Provider>
    );
  };

  test('renders user management page', () => {
    renderWithProviders(<FeishuUserManagement />);

    expect(screen.getByText('Feishu User Management')).toBeInTheDocument();
    expect(screen.getByText('Total Feishu Users')).toBeInTheDocument();
    expect(screen.getByText('Test User')).toBeInTheDocument();
  });

  test('displays statistics correctly', () => {
    renderWithProviders(<FeishuUserManagement />);

    expect(screen.getByText('1')).toBeInTheDocument(); // total users
    expect(screen.getByText('Active Users')).toBeInTheDocument();
  });

  test('handles user sync', async () => {
    const mockSyncUser = jest.fn();
    require('../../hooks/useFeishuUserManagement').useFeishuUserManagement.mockReturnValue({
      ...require('../../hooks/useFeishuUserManagement').useFeishuUserManagement(),
      syncUser: mockSyncUser
    });

    renderWithProviders(<FeishuUserManagement />);

    const syncButton = screen.getByText('Sync');
    fireEvent.click(syncButton);

    await waitFor(() => {
      expect(mockSyncUser).toHaveBeenCalledWith('1');
    });
  });
});
```

### ä»»åŠ¡3ï¼šæ–‡æ¡£å’ŒåŸ¹è®­ææ–™ (0.5å¤©)

#### 3.1 åˆ›å»ºç”¨æˆ·æ‰‹å†Œ
```markdown
# é£ä¹¦ç™»å½•é›†æˆç”¨æˆ·æ‰‹å†Œ

## æ¦‚è¿°

é£ä¹¦ç™»å½•é›†æˆä¸ºPigeon Webå¹³å°æä¾›äº†å®‰å…¨ã€ä¾¿æ·çš„å•ç‚¹ç™»å½•(SSO)åŠŸèƒ½ã€‚ç”¨æˆ·å¯ä»¥ä½¿ç”¨é£ä¹¦è´¦å·ç›´æ¥ç™»å½•ç³»ç»Ÿï¼Œæ— éœ€è®°ä½é¢å¤–çš„ç”¨æˆ·åå’Œå¯†ç ã€‚

## ç”¨æˆ·æŒ‡å—

### é¦–æ¬¡ä½¿ç”¨é£ä¹¦ç™»å½•

1. **è®¿é—®ç™»å½•é¡µé¢**
   - åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ `https://pigeon.company.com/auth/login`
   - æ‚¨å°†çœ‹åˆ°æ ‡å‡†ç™»å½•è¡¨å•å’Œ"Login with Feishu"æŒ‰é’®

2. **ç‚¹å‡»é£ä¹¦ç™»å½•**
   - ç‚¹å‡»è“è‰²çš„"Login with Feishu"æŒ‰é’®
   - ç³»ç»Ÿå°†é‡å®šå‘æ‚¨åˆ°é£ä¹¦æˆæƒé¡µé¢

3. **é£ä¹¦æˆæƒ**
   - åœ¨é£ä¹¦é¡µé¢ä¸­ï¼Œç¡®è®¤æˆæƒä¿¡æ¯
   - ç‚¹å‡»"æˆæƒ"æŒ‰é’®å…è®¸åº”ç”¨è®¿é—®æ‚¨çš„åŸºæœ¬ä¿¡æ¯

4. **å®Œæˆç™»å½•**
   - æˆæƒæˆåŠŸåï¼Œç³»ç»Ÿå°†è‡ªåŠ¨é‡å®šå‘å›Pigeon Web
   - æ‚¨å°†çœ‹åˆ°"Login Successful"æ¶ˆæ¯
   - å‡ ç§’é’Ÿåè‡ªåŠ¨è·³è½¬åˆ°ä¸»ç•Œé¢

### è´¦å·å…³è”

å¦‚æœæ‚¨å·²æœ‰Pigeon Webè´¦å·ï¼š
- ç³»ç»Ÿå°†æ ¹æ®é‚®ç®±åœ°å€è‡ªåŠ¨å…³è”æ‚¨çš„é£ä¹¦è´¦å·å’Œç°æœ‰è´¦å·
- å…³è”æˆåŠŸåï¼Œæ‚¨å¯ä»¥ä½¿ç”¨é£ä¹¦æˆ–ä¼ ç»Ÿæ–¹å¼ç™»å½•

### ç”¨æˆ·ä¿¡æ¯åŒæ­¥

é£ä¹¦ç™»å½•ä¼šè‡ªåŠ¨åŒæ­¥ä»¥ä¸‹ä¿¡æ¯ï¼š
- å§“åå’Œè‹±æ–‡å
- é‚®ç®±åœ°å€
- å¤´åƒ
- æ‰‹æœºå·ç ï¼ˆå¦‚æœè®¾ç½®ä¸ºå…¬å¼€ï¼‰
- éƒ¨é—¨ä¿¡æ¯

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

**Q: ç‚¹å‡»é£ä¹¦ç™»å½•æŒ‰é’®åé¡µé¢æ— å“åº”**
A: è¯·æ£€æŸ¥ï¼š
- æµè§ˆå™¨æ˜¯å¦é˜»æ­¢å¼¹çª—
- ç½‘ç»œè¿æ¥æ˜¯å¦æ­£å¸¸
- æ¸…é™¤æµè§ˆå™¨ç¼“å­˜åé‡è¯•

**Q: æˆæƒåæ˜¾ç¤º"Login Failed"**
A: å¯èƒ½åŸå› ï¼š
- æ‚¨çš„é‚®ç®±åŸŸåä¸åœ¨å…è®¸åˆ—è¡¨ä¸­
- ç³»ç»Ÿæ­£åœ¨ç»´æŠ¤
- è¯·è”ç³»ç®¡ç†å‘˜æ£€æŸ¥é…ç½®

**Q: æ— æ³•çœ‹åˆ°æœ€æ–°çš„é£ä¹¦ä¿¡æ¯**
A: ä¿¡æ¯åŒæ­¥å¯èƒ½éœ€è¦ä¸€äº›æ—¶é—´ï¼Œæ‚¨å¯ä»¥ï¼š
- é€€å‡ºç™»å½•åé‡æ–°ç™»å½•
- è”ç³»ç®¡ç†å‘˜æ‰‹åŠ¨åŒæ­¥

### å®‰å…¨æé†’

- ç¡®ä¿åœ¨å®˜æ–¹åŸŸåä¸‹è¿›è¡Œç™»å½•
- ä¸è¦åœ¨å…¬å…±ç”µè„‘ä¸Šä¿æŒç™»å½•çŠ¶æ€
- å¦‚å‘ç°å¼‚å¸¸ç™»å½•æ´»åŠ¨ï¼Œè¯·ç«‹å³è”ç³»ç®¡ç†å‘˜

## è”ç³»æ”¯æŒ

å¦‚éœ€æŠ€æœ¯æ”¯æŒï¼Œè¯·è”ç³»ï¼š
- é‚®ç®±ï¼šsupport@company.com
- å†…éƒ¨å·¥å•ç³»ç»Ÿ
- é£ä¹¦ç¾¤ï¼šPigeon WebæŠ€æœ¯æ”¯æŒç¾¤
```

#### 3.2 åˆ›å»ºç®¡ç†å‘˜æ‰‹å†Œ
```markdown
# é£ä¹¦ç™»å½•é›†æˆç®¡ç†å‘˜æ‰‹å†Œ

## ç®¡ç†ç•Œé¢

### è®¿é—®ç”¨æˆ·ç®¡ç†
1. ç™»å½•Pigeon Webç®¡ç†åå°
2. å¯¼èˆªåˆ°"ç³»ç»Ÿç®¡ç†" > "é£ä¹¦ç”¨æˆ·ç®¡ç†"
3. æŸ¥çœ‹ç”¨æˆ·åˆ—è¡¨å’Œç»Ÿè®¡ä¿¡æ¯

### ç”¨æˆ·åŒæ­¥ç®¡ç†

#### æ‰‹åŠ¨åŒæ­¥å•ä¸ªç”¨æˆ·
1. åœ¨ç”¨æˆ·åˆ—è¡¨ä¸­æ‰¾åˆ°ç›®æ ‡ç”¨æˆ·
2. ç‚¹å‡»"Sync"æŒ‰é’®
3. ç­‰å¾…åŒæ­¥å®Œæˆçš„æç¤º

#### æ‰¹é‡åŒæ­¥ç”¨æˆ·
1. é€‰æ‹©éœ€è¦åŒæ­¥çš„ç”¨æˆ·ï¼ˆå‹¾é€‰å¤é€‰æ¡†ï¼‰
2. ç‚¹å‡»"Batch Sync"æŒ‰é’®
3. ç¡®è®¤åŒæ­¥æ“ä½œ
4. ç›‘æ§åŒæ­¥è¿›åº¦å’Œç»“æœ

#### è‡ªåŠ¨åŒæ­¥é…ç½®
1. ç‚¹å‡»"Configuration"æŒ‰é’®
2. è®¾ç½®åŒæ­¥é¢‘ç‡ï¼ˆå»ºè®®24å°æ—¶ï¼‰
3. é…ç½®å…¶ä»–è‡ªåŠ¨åŒ–é€‰é¡¹

### é…ç½®ç®¡ç†

#### åŸºç¡€é…ç½®
- **è‡ªåŠ¨åˆ›å»ºç”¨æˆ·**: æ˜¯å¦ä¸ºæ–°çš„é£ä¹¦ç”¨æˆ·è‡ªåŠ¨åˆ›å»ºè´¦å·
- **å…è®¸çš„é‚®ç®±åŸŸå**: é™åˆ¶å¯ä»¥ç™»å½•çš„é‚®ç®±åŸŸå
- **é»˜è®¤è§’è‰²**: æ–°ç”¨æˆ·çš„é»˜è®¤æƒé™è§’è‰²
- **åŒæ­¥é¢‘ç‡**: è‡ªåŠ¨åŒæ­¥çš„æ—¶é—´é—´éš”

#### å®‰å…¨é…ç½®
- **IPç™½åå•**: é™åˆ¶ç™»å½•æ¥æºIP
- **ç™»å½•å°è¯•é™åˆ¶**: é˜²æš´åŠ›ç ´è§£è®¾ç½®
- **ä¼šè¯è¶…æ—¶**: ç”¨æˆ·ä¼šè¯çš„æœ‰æ•ˆæœŸ

### ç›‘æ§å’Œå‘Šè­¦

#### å…³é”®æŒ‡æ ‡ç›‘æ§
- ç™»å½•æˆåŠŸç‡
- APIå“åº”æ—¶é—´
- ç”¨æˆ·åŒæ­¥çŠ¶æ€
- ç³»ç»Ÿé”™è¯¯ç‡

#### å‘Šè­¦è®¾ç½®
- ç™»å½•å¤±è´¥ç‡è¿‡é«˜
- APIå“åº”æ—¶é—´è¿‡é•¿
- åŒæ­¥å¤±è´¥è¾¾åˆ°é˜ˆå€¼
- ç³»ç»ŸæœåŠ¡å¼‚å¸¸

### æ•…éšœæ’é™¤

#### å¸¸è§é—®é¢˜å¤„ç†

**ç”¨æˆ·æ— æ³•ç™»å½•**
1. æ£€æŸ¥ç”¨æˆ·é‚®ç®±åŸŸåæ˜¯å¦åœ¨å…è®¸åˆ—è¡¨ä¸­
2. éªŒè¯ç”¨æˆ·åœ¨é£ä¹¦ä¸­çš„çŠ¶æ€
3. æ£€æŸ¥ç³»ç»Ÿæ—¥å¿—ä¸­çš„é”™è¯¯ä¿¡æ¯
4. å°è¯•æ‰‹åŠ¨åŒæ­¥ç”¨æˆ·ä¿¡æ¯

**åŒæ­¥å¤±è´¥**
1. æ£€æŸ¥é£ä¹¦APIé…ç½®å’Œå¯†é’¥
2. éªŒè¯ç½‘ç»œè¿æ¥å’Œé˜²ç«å¢™è®¾ç½®
3. æŸ¥çœ‹é”™è¯¯æ—¥å¿—ç¡®å®šå…·ä½“åŸå› 
4. é‡å¯ç›¸å…³æœåŠ¡ç»„ä»¶

**æ€§èƒ½é—®é¢˜**
1. æ£€æŸ¥æ•°æ®åº“å’Œç¼“å­˜çŠ¶æ€
2. ç›‘æ§ç³»ç»Ÿèµ„æºä½¿ç”¨æƒ…å†µ
3. ä¼˜åŒ–åŒæ­¥é¢‘ç‡å’Œæ‰¹é‡å¤§å°
4. è€ƒè™‘æ‰©å±•ç³»ç»Ÿå®¹é‡

### è¿ç»´æ“ä½œ

#### æ—¥å¸¸ç»´æŠ¤
- å®šæœŸæ£€æŸ¥åŒæ­¥çŠ¶æ€
- ç›‘æ§ç³»ç»Ÿæ€§èƒ½æŒ‡æ ‡
- å®¡æŸ¥å®‰å…¨æ—¥å¿—
- æ›´æ–°é…ç½®å’Œå¯†é’¥

#### åº”æ€¥å“åº”
- ç³»ç»Ÿæ•…éšœæ—¶çš„é™çº§æ–¹æ¡ˆ
- å®‰å…¨äº‹ä»¶çš„å¤„ç†æµç¨‹
- æ•°æ®æ¢å¤å’Œå¤‡ä»½ç­–ç•¥
- ç”¨æˆ·é€šçŸ¥å’Œæ²Ÿé€šæœºåˆ¶

## æœ€ä½³å®è·µ

### å®‰å…¨å»ºè®®
1. å®šæœŸè½®æ¢APIå¯†é’¥
2. å¯ç”¨è¯¦ç»†çš„å®¡è®¡æ—¥å¿—
3. é…ç½®åˆé€‚çš„IPç™½åå•
4. ç›‘æ§å¼‚å¸¸ç™»å½•æ¨¡å¼

### æ€§èƒ½ä¼˜åŒ–
1. åˆç†è®¾ç½®ç¼“å­˜TTL
2. ä¼˜åŒ–æ•°æ®åº“æŸ¥è¯¢
3. ä½¿ç”¨æ‰¹é‡æ“ä½œ
4. ç›‘æ§å’Œè°ƒæ•´èµ„æºé…ç½®

### ç”¨æˆ·ä½“éªŒ
1. æä¾›æ¸…æ™°çš„é”™è¯¯æç¤º
2. ä¼˜åŒ–ç™»å½•æµç¨‹
3. åŠæ—¶åŒæ­¥ç”¨æˆ·ä¿¡æ¯
4. æä¾›ä¾¿æ·çš„æ”¯æŒæ¸ é“
```

**âœ… é˜¶æ®µæµ‹è¯•3ï¼šæ–‡æ¡£å®Œæ•´æ€§éªŒè¯**
```bash
#!/bin/bash
# deployment/scripts/validate-documentation.sh

# Copyright(c) 2025
# All rights reserved.
#
# Author: yukun.xing <xingyukun@gmail.com>
# Date:   2025/09/19

echo "ğŸ“š Validating Feishu Integration Documentation..."

# æ£€æŸ¥å¿…éœ€çš„æ–‡æ¡£æ–‡ä»¶
docs=(
    "docs/user-guide/feishu-login.md"
    "docs/admin-guide/feishu-management.md"
    "docs/api/feishu-endpoints.md"
    "docs/deployment/feishu-deployment.md"
    "docs/troubleshooting/feishu-issues.md"
)

echo "ğŸ“‹ Checking required documentation files..."
for doc in "${docs[@]}"; do
    if [[ -f "$doc" ]]; then
        echo "âœ… $doc exists"
    else
        echo "âŒ $doc is missing"
        exit 1
    fi
done

# æ£€æŸ¥æ–‡æ¡£å†…å®¹å®Œæ•´æ€§
echo "ğŸ” Checking documentation content..."

# æ£€æŸ¥ç”¨æˆ·æ‰‹å†Œå…³é”®ç« èŠ‚
if grep -q "é¦–æ¬¡ä½¿ç”¨é£ä¹¦ç™»å½•" "docs/user-guide/feishu-login.md"; then
    echo "âœ… User guide contains login instructions"
else
    echo "âŒ User guide missing login instructions"
fi

# æ£€æŸ¥ç®¡ç†å‘˜æ‰‹å†Œå…³é”®ç« èŠ‚
if grep -q "ç”¨æˆ·åŒæ­¥ç®¡ç†" "docs/admin-guide/feishu-management.md"; then
    echo "âœ… Admin guide contains sync management"
else
    echo "âŒ Admin guide missing sync management"
fi

# éªŒè¯APIæ–‡æ¡£
if grep -q "/api/v1/feishu-auth" "docs/api/feishu-endpoints.md"; then
    echo "âœ… API documentation contains endpoints"
else
    echo "âŒ API documentation missing endpoints"
fi

echo "âœ… Documentation validation completed!"
```

## ğŸ¯ é˜¶æ®µäº¤ä»˜ç‰©

### éƒ¨ç½²å·¥å…·
- [ ] ç”Ÿäº§ç¯å¢ƒé…ç½®æ–‡ä»¶å’Œè„šæœ¬
- [ ] è‡ªåŠ¨åŒ–éƒ¨ç½²è„šæœ¬
- [ ] ç›‘æ§å’Œå‘Šè­¦é…ç½®
- [ ] å¥åº·æ£€æŸ¥å’Œæµ‹è¯•è„šæœ¬

### ç®¡ç†ç•Œé¢
- [ ] é£ä¹¦ç”¨æˆ·ç®¡ç†é¡µé¢
- [ ] é…ç½®ç®¡ç†ç•Œé¢
- [ ] ç»Ÿè®¡å’Œç›‘æ§é¢æ¿
- [ ] ç®¡ç†Hookå’ŒAPIé›†æˆ

### æ–‡æ¡£ææ–™
- [ ] ç”¨æˆ·ä½¿ç”¨æ‰‹å†Œ
- [ ] ç®¡ç†å‘˜æ“ä½œæŒ‡å—
- [ ] APIæ¥å£æ–‡æ¡£
- [ ] æ•…éšœæ’é™¤æŒ‡å—
- [ ] éƒ¨ç½²å’Œè¿ç»´æ‰‹å†Œ

### è¿ç»´å·¥å…·
- [ ] æ•°æ®åº“è¿ç§»è„šæœ¬
- [ ] ç¼“å­˜ç®¡ç†å·¥å…·
- [ ] æ—¥å¿—åˆ†æè„šæœ¬
- [ ] æ€§èƒ½ç›‘æ§å·¥å…·

## ğŸ“ˆ æˆåŠŸæ ‡å‡†

1. **éƒ¨ç½²è‡ªåŠ¨åŒ–**ï¼šä¸€é”®éƒ¨ç½²æˆåŠŸç‡100%ï¼Œå›æ»šæ—¶é—´ < 5åˆ†é’Ÿ
2. **ç®¡ç†ä¾¿æ·æ€§**ï¼šç®¡ç†å‘˜å¯é€šè¿‡ç•Œé¢å®Œæˆæ‰€æœ‰é…ç½®å’Œç®¡ç†ä»»åŠ¡
3. **æ–‡æ¡£å®Œæ•´æ€§**ï¼šç”¨æˆ·å’Œç®¡ç†å‘˜èƒ½é€šè¿‡æ–‡æ¡£ç‹¬ç«‹å®Œæˆæ‰€æœ‰æ“ä½œ
4. **è¿ç»´å‹å¥½**ï¼šæä¾›å®Œæ•´çš„ç›‘æ§ã€æ—¥å¿—å’Œæ•…éšœæ’é™¤å·¥å…·
5. **ç”¨æˆ·æ»¡æ„åº¦**ï¼šç™»å½•æˆåŠŸç‡ > 99%ï¼Œç”¨æˆ·åé¦ˆè‰¯å¥½

---

**é¢„è®¡å®Œæˆæ—¶é—´**ï¼š2-3å¤©
**å…³é”®ä¾èµ–**ï¼šç¬¬1ã€2ã€3ã€4é˜¶æ®µå®Œæˆ
**æœ€ç»ˆæˆæœ**ï¼šå®Œæ•´å¯ç”¨çš„é£ä¹¦ç™»å½•é›†æˆç³»ç»Ÿï¼Œready for production