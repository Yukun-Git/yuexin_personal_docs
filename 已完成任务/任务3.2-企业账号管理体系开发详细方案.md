# ä»»åŠ¡3.2: ä¼ä¸šè´¦å·ç®¡ç†ä½“ç³»å¼€å‘è¯¦ç»†å®æ–½æ–¹æ¡ˆ

## ğŸ“Š ä»»åŠ¡æ¦‚å†µ

**ä»»åŠ¡åç§°**: ä¼ä¸šè´¦å·ç®¡ç†ä½“ç³»å¼€å‘  
**ä»»åŠ¡ä»£ç **: 3.2  
**ä¼˜å…ˆçº§**: P0 (æ ¸å¿ƒåŠŸèƒ½)  
**é¢„ä¼°å·¥æ—¶**: 16å°æ—¶ (2ä¸ªå·¥ä½œæ—¥)  
**å¼€å‘æ¨¡å¼**: å…¨æ ˆå¼€å‘ (åç«¯API + å‰ç«¯ç®¡ç†ç•Œé¢)  
**ä¾èµ–ä»»åŠ¡**: ä»»åŠ¡3.1 (å‰ç«¯åŸºç¡€æ¶æ„å·²å®Œæˆâœ…)

## ğŸ¯ ä¸šåŠ¡éœ€æ±‚åˆ†æ

### æ ¸å¿ƒåŠŸèƒ½éœ€æ±‚
1. **ä¼ä¸šè´¦å·ç®¡ç†**: æä¾›ä¼ä¸šå®¢æˆ·çš„ä¸»è´¦æˆ·ç®¡ç†åŠŸèƒ½
2. **è´¦å·å…³è”ä½“ç³»**: å»ºç«‹ä¼ä¸šè´¦å·ä¸å‘é€è´¦å·çš„å…³è”å…³ç³»
3. **åŸºç¡€ä¿¡æ¯ç®¡ç†**: ä¼ä¸šåŸºç¡€ä¿¡æ¯ã€è”ç³»æ–¹å¼ã€çŠ¶æ€ç®¡ç†
4. **æƒé™é›†æˆ**: ä¸ç°æœ‰RBACæƒé™ç³»ç»Ÿé›†æˆ
5. **å®¡è®¡è¿½è¸ª**: ä¼ä¸šè´¦å·æ“ä½œæ—¥å¿—è®°å½•

### ä¸šåŠ¡å®ä½“å…³ç³»
```
EnterpriseAccount (ä¼ä¸šè´¦å·)
â”œâ”€â”€ 1:N â†’ Account (å‘é€è´¦å·) 
â”œâ”€â”€ N:1 â†’ AdminUser (ç®¡ç†å‘˜)
â””â”€â”€ 1:N â†’ OperationLog (æ“ä½œæ—¥å¿—)
```

## ğŸ—ï¸ å½“å‰ç³»ç»ŸçŠ¶æ€åˆ†æ

### âœ… å·²å…·å¤‡çš„åŸºç¡€è®¾æ–½
1. **åç«¯æ¶æ„**: Flask + SQLAlchemy + JWTè®¤è¯ç³»ç»Ÿå®Œæ•´
2. **æ•°æ®åº“**: PostgreSQL + åŸºç¡€è¡¨ç»“æ„å·²å»ºç«‹
3. **å‰ç«¯æ¡†æ¶**: React 18 + TypeScript + RTK Queryå®Œæ•´æ¶æ„
4. **æƒé™ç³»ç»Ÿ**: å®Œæ•´çš„RBACæƒé™ç³»ç»Ÿ (AdminUser, Role, Permission)
5. **APIæ¡†æ¶**: ç»Ÿä¸€å“åº”æ ¼å¼ã€åˆ†é¡µã€éªŒè¯ç³»ç»Ÿ
6. **å‰ç«¯é¡µé¢**: CustomerManagementæ¨¡å—éª¨æ¶å·²å­˜åœ¨

### ğŸ”§ éœ€è¦å¼€å‘çš„ç»„ä»¶
1. **åç«¯**: EnterpriseAccountæ¨¡å‹ã€ä¼ä¸šè´¦å·CRUD API
2. **å‰ç«¯**: ä¼ä¸šè´¦å·ç®¡ç†é¡µé¢UIç»„ä»¶
3. **ä¸šåŠ¡é€»è¾‘**: ä¼ä¸šè´¦å·ä¸å‘é€è´¦å·å…³è”é€»è¾‘
4. **æ•°æ®éªŒè¯**: ä¼ä¸šä¿¡æ¯è¾“å…¥éªŒè¯å’Œå®‰å…¨æ§åˆ¶

## ğŸ“‹ è¯¦ç»†å­ä»»åŠ¡æ‹†è§£ 

### ç¬¬ä¸€é˜¶æ®µ: åç«¯æ•°æ®æ¨¡å‹å’ŒAPIå¼€å‘ (8å°æ—¶)

#### å­ä»»åŠ¡3.2.1: ä¼ä¸šè´¦å·æ•°æ®æ¨¡å‹è®¾è®¡ (2å°æ—¶)
**ç›®æ ‡**: åˆ›å»ºEnterpriseAccountæ•°æ®æ¨¡å‹

**å…·ä½“ä»»åŠ¡**:
1. **åˆ›å»ºæ¨¡å‹æ–‡ä»¶** (30åˆ†é’Ÿ)
   - åˆ›å»º `pigeon_web/app/models/customers/enterprise.py`
   - å®šä¹‰EnterpriseAccountç±»ï¼Œç»§æ‰¿TimestampMixin
   - è®¾è®¡æ ¸å¿ƒå­—æ®µï¼šä¼ä¸šIDã€ä¼ä¸šåç§°ã€è”ç³»ä¿¡æ¯ã€çŠ¶æ€ç­‰

2. **è®¾è®¡æ•°æ®åº“å…³ç³»** (45åˆ†é’Ÿ)
   - ä¸Accountæ¨¡å‹å»ºç«‹1:Nå…³ç³»
   - ä¸AdminUserå»ºç«‹å¤šå¯¹å¤šå…³ç³» (ç®¡ç†æƒé™)
   - è®¾è®¡åˆç†çš„ç´¢å¼•ç­–ç•¥

3. **æ·»åŠ ä¸šåŠ¡æ–¹æ³•** (45åˆ†é’Ÿ)
   - `to_dict()` æ–¹æ³•ï¼šåºåˆ—åŒ–
   - `is_active` å±æ€§ï¼šçŠ¶æ€æ£€æŸ¥
   - `get_sending_accounts()` æ–¹æ³•ï¼šè·å–å…³è”å‘é€è´¦å·
   - éªŒè¯æ–¹æ³•ï¼šé‚®ç®±ã€ç”µè¯æ ¼å¼éªŒè¯

**äº¤ä»˜ç‰©**:
- [x] `enterprise.py` æ¨¡å‹æ–‡ä»¶
- [x] æ•°æ®åº“è¿ç§»è„šæœ¬
- [x] æ¨¡å‹å•å…ƒæµ‹è¯•æ–‡ä»¶

#### å­ä»»åŠ¡3.2.2: æ•°æ®åº“è¿ç§»å’Œè¡¨ç»“æ„ (1å°æ—¶)
**ç›®æ ‡**: å»ºç«‹ä¼ä¸šè´¦å·æ•°æ®è¡¨

**å…·ä½“ä»»åŠ¡**:
1. **ç”Ÿæˆè¿ç§»è„šæœ¬** (30åˆ†é’Ÿ)
   - è¿è¡Œ `flask db migrate` ç”Ÿæˆè¿ç§»æ–‡ä»¶
   - æ£€æŸ¥ç”Ÿæˆçš„SQLè¯­å¥æ­£ç¡®æ€§
   - æ·»åŠ å¿…è¦çš„ç´¢å¼•å’Œçº¦æŸ

2. **æ‰§è¡Œæ•°æ®åº“è¿ç§»** (30åˆ†é’Ÿ)
   - åœ¨å¼€å‘ç¯å¢ƒæ‰§è¡Œ `flask db upgrade`
   - éªŒè¯è¡¨ç»“æ„åˆ›å»ºæ­£ç¡®
   - æµ‹è¯•å¤–é”®å…³è”å…³ç³»

**äº¤ä»˜ç‰©**:
- [x] æ•°æ®åº“è¿ç§»æ–‡ä»¶
- [x] ä¼ä¸šè´¦å·è¡¨åˆ›å»ºå®Œæˆ
- [x] å…³è”å…³ç³»éªŒè¯é€šè¿‡

#### å­ä»»åŠ¡3.2.3: ä¼ä¸šè´¦å·APIç«¯ç‚¹å¼€å‘ (3å°æ—¶)
**ç›®æ ‡**: å®ç°ä¼ä¸šè´¦å·CRUD API

**å…·ä½“ä»»åŠ¡**:
1. **åˆ›å»ºAPIè·¯ç”±æ–‡ä»¶** (45åˆ†é’Ÿ)
   - åˆ›å»º `pigeon_web/app/api/v1/enterprises/route/enterprise.py`
   - å®šä¹‰RESTful APIç«¯ç‚¹ï¼šGET, POST, PUT, DELETE
   - é›†æˆæƒé™éªŒè¯è£…é¥°å™¨

2. **å®ç°æ ¸å¿ƒAPIæ–¹æ³•** (1.5å°æ—¶)
   - `GET /api/v1/enterprises/enterprises` - ä¼ä¸šåˆ—è¡¨æŸ¥è¯¢
   - `POST /api/v1/enterprises/enterprises` - åˆ›å»ºä¼ä¸šè´¦å·
   - `GET /api/v1/enterprises/enterprises/{id}` - è·å–ä¼ä¸šè¯¦æƒ…
   - `PUT /api/v1/enterprises/enterprises/{id}` - æ›´æ–°ä¼ä¸šä¿¡æ¯
   - `DELETE /api/v1/enterprises/enterprises/{id}` - åˆ é™¤ä¼ä¸šè´¦å·

3. **æ·»åŠ é«˜çº§æŸ¥è¯¢åŠŸèƒ½** (45åˆ†é’Ÿ)
   - åˆ†é¡µæŸ¥è¯¢æ”¯æŒ
   - æœç´¢ç­›é€‰åŠŸèƒ½ (ä¼ä¸šåç§°ã€çŠ¶æ€ã€åˆ›å»ºæ—¶é—´)
   - æ’åºåŠŸèƒ½
   - æ‰¹é‡æ“ä½œæ”¯æŒ

**äº¤ä»˜ç‰©**:
- [x] ä¼ä¸šè´¦å·APIè·¯ç”±æ–‡ä»¶
- [x] 5ä¸ªæ ¸å¿ƒAPIç«¯ç‚¹å®ç°
- [x] APIå•å…ƒæµ‹è¯•

#### å­ä»»åŠ¡3.2.4: æ•°æ®éªŒè¯å’Œå®‰å…¨æ§åˆ¶ (1å°æ—¶)
**ç›®æ ‡**: å®ç°è¾“å…¥éªŒè¯å’Œå®‰å…¨æœºåˆ¶

**å…·ä½“ä»»åŠ¡**:
1. **åˆ›å»ºæ•°æ®éªŒè¯Schema** (30åˆ†é’Ÿ)
   - åˆ›å»º `pigeon_web/app/api/v1/enterprises/schema/enterprise.py`
   - å®šä¹‰MarshmallowéªŒè¯æ¨¡å¼
   - æ·»åŠ å­—æ®µéªŒè¯è§„åˆ™ï¼šå¿…å¡«å­—æ®µã€æ ¼å¼éªŒè¯ã€é•¿åº¦é™åˆ¶

2. **é›†æˆå®‰å…¨æ§åˆ¶** (30åˆ†é’Ÿ)
   - è¾“å…¥æ•°æ®XSSè¿‡æ»¤
   - SQLæ³¨å…¥é˜²æŠ¤
   - æƒé™éªŒè¯é›†æˆ
   - æ“ä½œæ—¥å¿—è®°å½•

**äº¤ä»˜ç‰©**:
- [x] æ•°æ®éªŒè¯Schemaæ–‡ä»¶
- [x] å®‰å…¨æ§åˆ¶æœºåˆ¶
- [x] éªŒè¯è§„åˆ™æµ‹è¯•

#### å­ä»»åŠ¡3.2.5: æœåŠ¡å±‚ä¸šåŠ¡é€»è¾‘ (1å°æ—¶)
**ç›®æ ‡**: å®ç°ä¼ä¸šè´¦å·ä¸šåŠ¡æœåŠ¡å±‚

**å…·ä½“ä»»åŠ¡**:
1. **åˆ›å»ºä¼ä¸šè´¦å·æœåŠ¡ç±»** (45åˆ†é’Ÿ)
   - åˆ›å»º `pigeon_web/app/services/enterprises/service.py`
   - å®ç°ä¸šåŠ¡é€»è¾‘æ–¹æ³•
   - é›†æˆäº‹åŠ¡ç®¡ç†

2. **æ·»åŠ å…³è”ä¸šåŠ¡é€»è¾‘** (15åˆ†é’Ÿ)
   - ä¼ä¸šè´¦å·ä¸å‘é€è´¦å·å…³è”ç®¡ç†
   - æ‰¹é‡æ“ä½œäº‹åŠ¡æ§åˆ¶
   - çŠ¶æ€å˜æ›´ä¸šåŠ¡è§„åˆ™

**äº¤ä»˜ç‰©**:
- [x] ä¼ä¸šè´¦å·æœåŠ¡ç±»
- [x] ä¸šåŠ¡é€»è¾‘æµ‹è¯•

### ç¬¬äºŒé˜¶æ®µ: å‰ç«¯ç®¡ç†ç•Œé¢å¼€å‘ (8å°æ—¶)

#### å­ä»»åŠ¡3.2.6: ä¼ä¸šè´¦å·åˆ—è¡¨é¡µé¢å¼€å‘ (3å°æ—¶)
**ç›®æ ‡**: å¼€å‘ä¼ä¸šè´¦å·åˆ—è¡¨ç®¡ç†é¡µé¢

**å…·ä½“ä»»åŠ¡**:
1. **åˆ›å»ºé¡µé¢ç»„ä»¶ç»“æ„** (45åˆ†é’Ÿ)
   - åˆ›å»º `pigeon_web/frontend/src/pages/CustomerManagement/Enterprise/` ç›®å½•
   - åˆ›å»ºä¸»é¡µé¢ç»„ä»¶ `EnterprisePage.tsx`
   - åˆ›å»ºåˆ—è¡¨ç»„ä»¶ `EnterpriseList.tsx`
   - è®¾è®¡ç»„ä»¶Propså’ŒStateæ¥å£

2. **å¼€å‘æœç´¢ç­›é€‰åŒºåŸŸ** (45åˆ†é’Ÿ)
   - åˆ›å»º `SearchFilterSection.tsx` ç»„ä»¶
   - å®ç°ä¼ä¸šåç§°æœç´¢
   - å®ç°çŠ¶æ€ç­›é€‰ (å…¨éƒ¨/å¯ç”¨/ç¦ç”¨)
   - å®ç°æ—¶é—´èŒƒå›´ç­›é€‰
   - é›†æˆReact Hook Formè¡¨å•ç®¡ç†

3. **å¼€å‘æ•°æ®è¡¨æ ¼ç»„ä»¶** (1.5å°æ—¶)
   - åˆ›å»º `EnterpriseListTable.tsx` ç»„ä»¶
   - å®ç°è¡¨æ ¼åˆ—å®šä¹‰ï¼šä¼ä¸šIDã€åç§°ã€è”ç³»æ–¹å¼ã€çŠ¶æ€ã€åˆ›å»ºæ—¶é—´ã€æ“ä½œ
   - é›†æˆAnt Design Tableç»„ä»¶
   - å®ç°è¡¨æ ¼æ’åºã€åˆ†é¡µåŠŸèƒ½
   - å®ç°è¡Œé€‰æ‹©å’Œæ‰¹é‡æ“ä½œ

**äº¤ä»˜ç‰©**:
- [x] ä¼ä¸šè´¦å·åˆ—è¡¨é¡µé¢ç»„ä»¶
- [x] æœç´¢ç­›é€‰åŠŸèƒ½
- [x] æ•°æ®è¡¨æ ¼æ˜¾ç¤º

#### å­ä»»åŠ¡3.2.7: ä¼ä¸šè´¦å·è¡¨å•ç»„ä»¶å¼€å‘ (2å°æ—¶)
**ç›®æ ‡**: å¼€å‘ä¼ä¸šè´¦å·åˆ›å»ºå’Œç¼–è¾‘è¡¨å•

**å…·ä½“ä»»åŠ¡**:
1. **åˆ›å»ºè¡¨å•å¼¹çª—ç»„ä»¶** (45åˆ†é’Ÿ)
   - åˆ›å»º `EnterpriseFormModal.tsx` ç»„ä»¶
   - é›†æˆAnt Design Modalç»„ä»¶
   - å®ç°æ–°å»º/ç¼–è¾‘æ¨¡å¼åˆ‡æ¢
   - è®¾è®¡è¡¨å•å¸ƒå±€å’Œå­—æ®µç»„ç»‡

2. **å¼€å‘åŸºç¡€ä¿¡æ¯è¡¨å•** (45åˆ†é’Ÿ)
   - åˆ›å»º `BasicInfoForm.tsx` ç»„ä»¶
   - å®ç°ä¼ä¸šåŸºç¡€ä¿¡æ¯å­—æ®µï¼šä¼ä¸šåç§°ã€ä¼ä¸šç±»å‹ã€æ³¨å†Œåœ°å€
   - é›†æˆè¡¨å•éªŒè¯ï¼šå¿…å¡«éªŒè¯ã€æ ¼å¼éªŒè¯
   - æ·»åŠ å®æ—¶éªŒè¯åé¦ˆ

3. **å¼€å‘è”ç³»ä¿¡æ¯è¡¨å•** (30åˆ†é’Ÿ)
   - åˆ›å»º `ContactInfoForm.tsx` ç»„ä»¶
   - å®ç°è”ç³»ä¿¡æ¯å­—æ®µï¼šè”ç³»äººã€ç”µè¯ã€é‚®ç®±ã€åœ°å€
   - æ·»åŠ æ ¼å¼éªŒè¯ï¼šé‚®ç®±æ ¼å¼ã€ç”µè¯æ ¼å¼
   - å®ç°è¡¨å•æ•°æ®ç»‘å®š

**äº¤ä»˜ç‰©**:
- [x] ä¼ä¸šè´¦å·è¡¨å•å¼¹çª—ç»„ä»¶
- [x] åŸºç¡€ä¿¡æ¯è¡¨å•
- [x] è”ç³»ä¿¡æ¯è¡¨å•

#### å­ä»»åŠ¡3.2.8: æ“ä½œåŠŸèƒ½ç»„ä»¶å¼€å‘ (1.5å°æ—¶)
**ç›®æ ‡**: å¼€å‘ä¼ä¸šè´¦å·æ“ä½œç›¸å…³åŠŸèƒ½

**å…·ä½“ä»»åŠ¡**:
1. **åˆ›å»ºæ“ä½œå·¥å…·æ ** (30åˆ†é’Ÿ)
   - åˆ›å»º `ActionToolbar.tsx` ç»„ä»¶
   - å®ç°æ–°å»ºæŒ‰é’®
   - å®ç°æ‰¹é‡æ“ä½œï¼šå¯ç”¨ã€ç¦ç”¨ã€åˆ é™¤
   - å®ç°å¯¼å‡ºåŠŸèƒ½æŒ‰é’®

2. **å®ç°è¯¦æƒ…æŸ¥çœ‹åŠŸèƒ½** (45åˆ†é’Ÿ)
   - åˆ›å»º `EnterpriseDetailModal.tsx` ç»„ä»¶
   - å±•ç¤ºä¼ä¸šå®Œæ•´ä¿¡æ¯
   - æ˜¾ç¤ºå…³è”çš„å‘é€è´¦å·åˆ—è¡¨
   - æ˜¾ç¤ºæ“ä½œå†å²è®°å½•

3. **å®ç°çŠ¶æ€ç®¡ç†ç»„ä»¶** (15åˆ†é’Ÿ)
   - åˆ›å»º `StatusBadge.tsx` ç»„ä»¶
   - å®ç°çŠ¶æ€åˆ‡æ¢æŒ‰é’®
   - æ·»åŠ çŠ¶æ€å˜æ›´ç¡®è®¤æœºåˆ¶

**äº¤ä»˜ç‰©**:
- [x] æ“ä½œå·¥å…·æ ç»„ä»¶
- [x] ä¼ä¸šè¯¦æƒ…æŸ¥çœ‹åŠŸèƒ½
- [x] çŠ¶æ€ç®¡ç†ç»„ä»¶

#### å­ä»»åŠ¡3.2.9: æ•°æ®äº¤äº’å’ŒçŠ¶æ€ç®¡ç† (1.5å°æ—¶)
**ç›®æ ‡**: å®ç°å‰åç«¯æ•°æ®äº¤äº’å’ŒçŠ¶æ€ç®¡ç†

**å…·ä½“ä»»åŠ¡**:
1. **åˆ›å»ºRTK Query APIåˆ‡ç‰‡** (45åˆ†é’Ÿ)
   - åˆ›å»º `pigeon_web/frontend/src/api/enterpriseApi.ts`
   - å®šä¹‰ä¼ä¸šè´¦å·ç›¸å…³APIç«¯ç‚¹
   - å®ç°æ•°æ®ç¼“å­˜å’ŒåŒæ­¥ç­–ç•¥
   - é›†æˆé”™è¯¯å¤„ç†æœºåˆ¶

2. **åˆ›å»ºReduxçŠ¶æ€åˆ‡ç‰‡** (30åˆ†é’Ÿ)
   - åˆ›å»º `pigeon_web/frontend/src/store/slices/enterpriseSlice.ts`
   - å®šä¹‰ä¼ä¸šè´¦å·çŠ¶æ€ç»“æ„
   - å®ç°çŠ¶æ€æ›´æ–°é€»è¾‘
   - æ·»åŠ å¼‚æ­¥æ“ä½œå¤„ç†

3. **å®ç°è‡ªå®šä¹‰Hooks** (15åˆ†é’Ÿ)
   - åˆ›å»º `useEnterprise.ts` è‡ªå®šä¹‰Hook
   - å°è£…ä¼ä¸šè´¦å·æ“ä½œé€»è¾‘
   - æä¾›ç»Ÿä¸€çš„æ•°æ®è®¿é—®æ¥å£

**äº¤ä»˜ç‰©**:
- [x] RTK Query APIåˆ‡ç‰‡
- [x] ReduxçŠ¶æ€ç®¡ç†
- [x] è‡ªå®šä¹‰Hooks

## ğŸ› ï¸ æŠ€æœ¯å®ç°è§„èŒƒ

### åç«¯å¼€å‘è§„èŒƒ
1. **æ¨¡å‹è®¾è®¡**: ç»§æ‰¿TimestampMixinï¼Œä½¿ç”¨SQLAlchemyå…³ç³»æ˜ å°„
2. **APIè®¾è®¡**: RESTfulé£æ ¼ï¼Œç»Ÿä¸€å“åº”æ ¼å¼
3. **æƒé™æ§åˆ¶**: ä½¿ç”¨@permission_requiredè£…é¥°å™¨
4. **æ•°æ®éªŒè¯**: Marshmallow SchemaéªŒè¯
5. **é”™è¯¯å¤„ç†**: ç»Ÿä¸€å¼‚å¸¸å¤„ç†å’Œæ—¥å¿—è®°å½•

### å‰ç«¯å¼€å‘è§„èŒƒ
1. **ç»„ä»¶è®¾è®¡**: å‡½æ•°å¼ç»„ä»¶ + TypeScriptæ¥å£
2. **çŠ¶æ€ç®¡ç†**: RTK Query + Redux Toolkit
3. **è¡¨å•å¤„ç†**: React Hook Form + YupéªŒè¯
4. **UIç»„ä»¶**: ä¸¥æ ¼éµå¾ªAnt Designè®¾è®¡è¯­è¨€
5. **ä»£ç ç»„ç»‡**: æŒ‰åŠŸèƒ½æ¨¡å—ç»„ç»‡ï¼Œç»Ÿä¸€å¯¼å…¥å¯¼å‡º

### æ•°æ®åº“è®¾è®¡è§„èŒƒ
1. **å‘½åçº¦å®š**: snake_caseå‘½åé£æ ¼
2. **ç´¢å¼•ç­–ç•¥**: æŸ¥è¯¢é¢‘ç¹å­—æ®µæ·»åŠ ç´¢å¼•
3. **å¤–é”®å…³ç³»**: æ­£ç¡®è®¾ç½®çº§è”æ“ä½œ
4. **çº¦æŸè®¾ç½®**: æ·»åŠ å¿…è¦çš„æ•°æ®çº¦æŸ

## ğŸ“ æ–‡ä»¶ç»“æ„è§„åˆ’

### åç«¯æ–‡ä»¶ç»“æ„
```
pigeon_web/app/
â”œâ”€â”€ models/customers/
â”‚   â”œâ”€â”€ __init__.py (æ›´æ–°)
â”‚   â”œâ”€â”€ account.py (å·²å­˜åœ¨)
â”‚   â””â”€â”€ enterprise.py (æ–°å»º) â­
â”œâ”€â”€ api/v1/enterprises/
â”‚   â”œâ”€â”€ route/
â”‚   â”‚   â”œâ”€â”€ __init__.py (æ›´æ–°)
â”‚   â”‚   â””â”€â”€ enterprise.py (æ–°å»º) â­
â”‚   â””â”€â”€ schema/
â”‚       â”œâ”€â”€ __init__.py (æ›´æ–°)  
â”‚       â””â”€â”€ enterprise.py (æ–°å»º) â­
â””â”€â”€ services/enterprises/
    â”œâ”€â”€ __init__.py (æ–°å»º)
    â””â”€â”€ service.py (æ–°å»º) â­
```

### å‰ç«¯æ–‡ä»¶ç»“æ„
```
pigeon_web/frontend/src/
â”œâ”€â”€ pages/CustomerManagement/Enterprise/
â”‚   â”œâ”€â”€ index.tsx (æ–°å»º) â­
â”‚   â”œâ”€â”€ EnterprisePage.tsx (æ–°å»º) â­
â”‚   â”œâ”€â”€ EnterpriseList.tsx (æ–°å»º) â­
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ SearchFilterSection.tsx (æ–°å»º) â­
â”‚   â”‚   â”œâ”€â”€ EnterpriseListTable.tsx (æ–°å»º) â­
â”‚   â”‚   â”œâ”€â”€ EnterpriseFormModal.tsx (æ–°å»º) â­
â”‚   â”‚   â”œâ”€â”€ BasicInfoForm.tsx (æ–°å»º) â­
â”‚   â”‚   â”œâ”€â”€ ContactInfoForm.tsx (æ–°å»º) â­
â”‚   â”‚   â”œâ”€â”€ EnterpriseDetailModal.tsx (æ–°å»º) â­
â”‚   â”‚   â”œâ”€â”€ ActionToolbar.tsx (æ–°å»º) â­
â”‚   â”‚   â””â”€â”€ StatusBadge.tsx (æ–°å»º) â­
â”‚   â””â”€â”€ types.ts (æ–°å»º) â­
â”œâ”€â”€ api/
â”‚   â””â”€â”€ enterpriseApi.ts (æ–°å»º) â­
â”œâ”€â”€ store/slices/
â”‚   â””â”€â”€ enterpriseSlice.ts (æ–°å»º) â­
â””â”€â”€ hooks/
    â””â”€â”€ useEnterprise.ts (æ–°å»º) â­
```

## ğŸ¯ å…³é”®æŠ€æœ¯ç‚¹

### 1. æ•°æ®æ¨¡å‹å…³è”è®¾è®¡
```python
class EnterpriseAccount(db.Model, TimestampMixin):
    __tablename__ = 'enterprise_accounts'
    
    # ä¸Accountçš„ä¸€å¯¹å¤šå…³ç³»
    accounts = db.relationship('Account', backref='enterprise', lazy='dynamic')
    
    # ä¸AdminUserçš„å¤šå¯¹å¤šå…³ç³»
    managers = db.relationship('AdminUser', 
                             secondary='enterprise_managers',
                             backref='managed_enterprises')
```

### 2. å‰ç«¯æ•°æ®æµè®¾è®¡
```typescript
// RTK Query APIè®¾è®¡
export const enterpriseApi = createApi({
  reducerPath: 'enterpriseApi',
  baseQuery: fetchBaseQuery({
    baseUrl: '/api/v1/enterprises/enterprises',
  }),
  endpoints: (builder) => ({
    getEnterprises: builder.query<EnterpriseListResponse, EnterpriseListParams>({
      query: (params) => ({ url: '', params }),
    }),
    // ... å…¶ä»–ç«¯ç‚¹
  }),
});
```

### 3. è¡¨å•éªŒè¯è§„åˆ™
```typescript
const enterpriseValidationSchema = yup.object({
  enterprise_name: yup.string()
    .required('ä¼ä¸šåç§°ä¸ºå¿…å¡«é¡¹')
    .min(2, 'ä¼ä¸šåç§°è‡³å°‘2ä¸ªå­—ç¬¦')
    .max(100, 'ä¼ä¸šåç§°æœ€å¤š100ä¸ªå­—ç¬¦'),
  email: yup.string()
    .email('è¯·è¾“å…¥æœ‰æ•ˆçš„é‚®ç®±åœ°å€')
    .required('é‚®ç®±ä¸ºå¿…å¡«é¡¹'),
  // ... å…¶ä»–éªŒè¯è§„åˆ™
});
```

## âš ï¸ é£é™©æ§åˆ¶å’Œæ³¨æ„äº‹é¡¹

### æ•°æ®å®‰å…¨é£é™©
1. **æ•æ„Ÿä¿¡æ¯ä¿æŠ¤**: ä¼ä¸šä¿¡æ¯åŠ å¯†å­˜å‚¨ï¼ŒAPIå“åº”è¿‡æ»¤æ•æ„Ÿå­—æ®µ
2. **æƒé™éªŒè¯**: ä¸¥æ ¼çš„RBACæƒé™æ§åˆ¶ï¼Œé˜²æ­¢è¶Šæƒè®¿é—®
3. **è¾“å…¥éªŒè¯**: é˜²æ­¢XSSæ”»å‡»å’ŒSQLæ³¨å…¥ï¼Œæ‰€æœ‰è¾“å…¥æ•°æ®è¿‡æ»¤
4. **æ“ä½œå®¡è®¡**: è®°å½•æ‰€æœ‰å…³é”®æ“ä½œï¼Œä¾¿äºé—®é¢˜è¿½è¸ª

### ä¸šåŠ¡é€»è¾‘é£é™©
1. **å…³è”å…³ç³»**: ä¼ä¸šè´¦å·åˆ é™¤æ—¶å¤„ç†å…³è”çš„å‘é€è´¦å·
2. **çŠ¶æ€åŒæ­¥**: ä¼ä¸šè´¦å·çŠ¶æ€å˜æ›´æ—¶åŒæ­¥æ›´æ–°å…³è”è´¦å·çŠ¶æ€
3. **å¹¶å‘æ§åˆ¶**: é˜²æ­¢åŒæ—¶æ“ä½œåŒä¸€ä¼ä¸šè´¦å·å¯¼è‡´æ•°æ®ä¸ä¸€è‡´
4. **æ•°æ®å®Œæ•´æ€§**: ç¡®ä¿ä¼ä¸šåŸºç¡€ä¿¡æ¯å®Œæ•´æ€§å’Œå‡†ç¡®æ€§

### æ€§èƒ½ä¼˜åŒ–é£é™©
1. **æŸ¥è¯¢ä¼˜åŒ–**: é¿å…N+1æŸ¥è¯¢é—®é¢˜ï¼Œåˆç†ä½¿ç”¨JOINå’Œç´¢å¼•
2. **åˆ†é¡µæ§åˆ¶**: å¤§é‡ä¼ä¸šæ•°æ®çš„åˆ†é¡µæŸ¥è¯¢ä¼˜åŒ–
3. **ç¼“å­˜ç­–ç•¥**: çƒ­ç‚¹ä¼ä¸šæ•°æ®ç¼“å­˜ï¼Œå‡å°‘æ•°æ®åº“å‹åŠ›
4. **å‰ç«¯æ€§èƒ½**: è¡¨æ ¼è™šæ‹ŸåŒ–ï¼Œé¿å…å¤§é‡DOMæ¸²æŸ“

## ğŸ“Š éªŒæ”¶æ ‡å‡†

### åŠŸèƒ½å®Œæ•´æ€§éªŒæ”¶
- [x] ä¼ä¸šè´¦å·CRUDåŠŸèƒ½å®Œæ•´
- [x] æœç´¢ç­›é€‰åŠŸèƒ½æ­£å¸¸
- [x] åˆ†é¡µæ’åºåŠŸèƒ½æ­£ç¡®
- [x] è¡¨å•éªŒè¯æœºåˆ¶æœ‰æ•ˆ
- [x] æƒé™æ§åˆ¶ä¸¥æ ¼æ‰§è¡Œ
- [x] æ“ä½œæ—¥å¿—è®°å½•å®Œæ•´

### ä»£ç è´¨é‡éªŒæ”¶
- [x] ä»£ç ç¬¦åˆé¡¹ç›®è§„èŒƒ
- [x] TypeScriptç±»å‹å®šä¹‰å®Œæ•´
- [x] ç»„ä»¶èŒè´£å•ä¸€æ¸…æ™°
- [x] é”™è¯¯å¤„ç†æœºåˆ¶å®Œå–„
- [x] å•å…ƒæµ‹è¯•è¦†ç›–ç‡ > 80%

### ç”¨æˆ·ä½“éªŒéªŒæ”¶
- [x] é¡µé¢åŠ è½½é€Ÿåº¦ < 2ç§’
- [x] æ“ä½œå“åº”åŠæ—¶
- [x] é”™è¯¯æç¤ºå‹å¥½
- [x] ç•Œé¢å¸ƒå±€ç¾è§‚
- [x] å“åº”å¼é€‚é…è‰¯å¥½

### å®‰å…¨æ€§éªŒæ”¶
- [x] æƒé™éªŒè¯æœ‰æ•ˆ
- [x] æ•æ„Ÿæ•°æ®ä¿æŠ¤
- [x] è¾“å…¥éªŒè¯å…¨é¢
- [x] æ“ä½œå®¡è®¡å®Œæ•´

## ğŸš€ éƒ¨ç½²å’Œæµ‹è¯•è®¡åˆ’

### å¼€å‘ç¯å¢ƒæµ‹è¯•
1. **å•å…ƒæµ‹è¯•**: æ¨¡å‹ã€APIã€ç»„ä»¶å•å…ƒæµ‹è¯•
2. **é›†æˆæµ‹è¯•**: å‰åç«¯APIé›†æˆæµ‹è¯•
3. **åŠŸèƒ½æµ‹è¯•**: å®Œæ•´ä¸šåŠ¡æµç¨‹æµ‹è¯•
4. **å®‰å…¨æµ‹è¯•**: æƒé™å’Œæ•°æ®å®‰å…¨éªŒè¯

### æµ‹è¯•ç”¨ä¾‹è¦†ç›–
1. **æ­£å¸¸æµç¨‹**: ä¼ä¸šè´¦å·åˆ›å»ºã€ç¼–è¾‘ã€æŸ¥è¯¢ã€åˆ é™¤
2. **å¼‚å¸¸å¤„ç†**: ç½‘ç»œé”™è¯¯ã€æƒé™ä¸è¶³ã€æ•°æ®éªŒè¯å¤±è´¥
3. **è¾¹ç•Œæ¡ä»¶**: å¤§é‡æ•°æ®åˆ†é¡µã€ç‰¹æ®Šå­—ç¬¦è¾“å…¥ã€é•¿æ–‡æœ¬å¤„ç†
4. **æ€§èƒ½æµ‹è¯•**: å¹¶å‘æ“ä½œã€å¤§æ•°æ®é‡å¤„ç†

## ğŸ“ˆ æˆåŠŸæŒ‡æ ‡

### å¼€å‘æ•ˆç‡æŒ‡æ ‡
- **å¼€å‘è¿›åº¦**: æŒ‰è®¡åˆ’å®Œæˆæ—¶é—´èŠ‚ç‚¹ (16å°æ—¶å†…å®Œæˆ)
- **ä»£ç è´¨é‡**: é€šè¿‡æ‰€æœ‰ä»£ç å®¡æŸ¥å’Œæµ‹è¯•ç”¨ä¾‹
- **åŠŸèƒ½è¦†ç›–**: 100%å®ç°éœ€æ±‚è§„æ ¼ä¸­çš„åŠŸèƒ½ç‚¹

### ç³»ç»Ÿæ€§èƒ½æŒ‡æ ‡
- **APIå“åº”æ—¶é—´**: < 500ms (95%æƒ…å†µä¸‹)
- **é¡µé¢åŠ è½½æ—¶é—´**: < 2ç§’
- **æ•°æ®åº“æŸ¥è¯¢æ€§èƒ½**: å¤æ‚æŸ¥è¯¢ < 100ms
- **å¹¶å‘å¤„ç†èƒ½åŠ›**: æ”¯æŒ100å¹¶å‘ç”¨æˆ·

### ç”¨æˆ·æ»¡æ„åº¦æŒ‡æ ‡
- **ç•Œé¢æ˜“ç”¨æ€§**: ç¬¦åˆç°ä»£Webåº”ç”¨æ ‡å‡†
- **åŠŸèƒ½å®Œæ•´æ€§**: æ»¡è¶³ä¼ä¸šè´¦å·ç®¡ç†æ‰€æœ‰éœ€æ±‚
- **ç¨³å®šæ€§**: 7*24å°æ—¶ç¨³å®šè¿è¡Œï¼Œé”™è¯¯ç‡ < 0.1%

---

**æ–‡æ¡£åˆ›å»ºæ—¶é—´**: 2025-09-05  
**é¢„è®¡å®Œæˆæ—¶é—´**: 2025-09-05 (16å°æ—¶å)  
**è´Ÿè´£äºº**: Claude Code Assistant  
**æ–‡æ¡£ç‰ˆæœ¬**: v1.0  
**å®¡æ ¸çŠ¶æ€**: å¾…ç”¨æˆ·Review ğŸ”

## ğŸ“‹ å®æ–½æ—¶é—´è§„åˆ’

### Day 1 (8å°æ—¶) - åç«¯å¼€å‘
- **09:00-11:00**: å­ä»»åŠ¡3.2.1 + 3.2.2 (æ¨¡å‹è®¾è®¡+æ•°æ®åº“è¿ç§»)
- **11:00-14:00**: å­ä»»åŠ¡3.2.3 (APIç«¯ç‚¹å¼€å‘)  
- **14:00-15:00**: åˆä¼‘
- **15:00-16:00**: å­ä»»åŠ¡3.2.4 (æ•°æ®éªŒè¯)
- **16:00-17:00**: å­ä»»åŠ¡3.2.5 (æœåŠ¡å±‚)
- **17:00-18:00**: åç«¯æµ‹è¯•å’Œè°ƒè¯•

### Day 2 (8å°æ—¶) - å‰ç«¯å¼€å‘
- **09:00-12:00**: å­ä»»åŠ¡3.2.6 (åˆ—è¡¨é¡µé¢å¼€å‘)
- **12:00-14:00**: å­ä»»åŠ¡3.2.7 (è¡¨å•ç»„ä»¶å¼€å‘)
- **14:00-15:00**: åˆä¼‘  
- **15:00-16:30**: å­ä»»åŠ¡3.2.8 (æ“ä½œåŠŸèƒ½ç»„ä»¶)
- **16:30-18:00**: å­ä»»åŠ¡3.2.9 (æ•°æ®äº¤äº’å’ŒçŠ¶æ€ç®¡ç†)

**æ€»è®¡**: 16å°æ—¶ (2ä¸ªå·¥ä½œæ—¥)

**ğŸ¯ è¿™ä¸ªæ–¹æ¡ˆå·²ç»å‡†å¤‡å°±ç»ªï¼Œç­‰å¾…æ‚¨çš„Reviewå’Œç¡®è®¤ï¼**