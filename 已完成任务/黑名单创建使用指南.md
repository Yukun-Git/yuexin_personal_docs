# 黑名单创建使用指南

## 📝 问题解决

**问题**: 创建黑名单条目时出现500错误  
**原因**: 内容格式不符合所选类型的要求  
**解决**: 按照下面的格式要求输入正确内容

## 📋 黑名单类型及格式要求

### 1. 📱 Spam Phone Numbers（垃圾手机号）
**要求**: 必须是有效的电话号码格式  
**允许字符**: 数字、空格、+、-、(、)  
**长度**: 7-20位  

**✅ 正确格式**:
- `+86-13812345678`
- `(555) 123-4567`
- `+1-800-555-0123`
- `13812345678`
- `555 123 4567`

**❌ 错误格式**:
- `spam_content` (不是电话号码)
- `abc123` (包含非法字符)
- `123` (太短)

### 2. 💻 Malicious IPs（恶意IP）
**要求**: 必须是有效的IPv4地址或CIDR网络  
**格式**: `xxx.xxx.xxx.xxx` 或 `xxx.xxx.xxx.xxx/xx`  

**✅ 正确格式**:
- `192.168.1.1`
- `10.0.0.0/24`
- `172.16.254.1`
- `203.0.113.0/24`

**❌ 错误格式**:
- `192.168.1` (不完整)
- `256.1.1.1` (数值超出范围)
- `bad.ip.address` (非数字)

### 3. 📧 Spam Emails（垃圾邮箱）
**要求**: 必须是有效的邮箱地址格式  
**格式**: `用户名@域名.后缀`  

**✅ 正确格式**:
- `spam@example.com`
- `bad-user@evil.com`
- `fake@domain.net`
- `test123@gmail.com`

**❌ 错误格式**:
- `invalid-email` (缺少@)
- `@domain.com` (缺少用户名)
- `user@` (缺少域名)

### 4. 🌐 Spam Domains（垃圾域名）
**要求**: 域名格式，不含协议  
**注意**: 没有严格的正则验证，相对宽松  

**✅ 正确格式**:
- `spam.com`
- `bad-site.org`
- `evil-domain.net`
- `malicious.co.uk`

**❌ 建议避免**:
- `http://spam.com` (不要包含协议)
- `https://bad.com` (不要包含协议)

### 5. 🔤 Prohibited Keywords（禁用关键词）
**要求**: **无格式限制**，可以是任意文本  
**推荐**: 如果不确定内容格式，选择这个类型  

**✅ 任何内容都可以**:
- `任意文本内容`
- `spam content`
- `prohibited words`
- `敏感词汇`
- `123456`
- `特殊符号!@#$%`

## 🛠️ 使用新功能

### ✨ 动态格式提示
1. **选择类型后自动显示**:
   - 格式要求说明
   - 示例内容
   - 允许的字符

2. **实时验证**:
   - 输入时即时检查格式
   - 绿色勾号表示正确
   - 红色错误提示格式问题

### 🔍 详细错误信息
如果创建失败，系统会显示：
- **具体错误原因**
- **类型格式要求**
- **正确示例**
- **建议修改方案**

### 📝 表单改进
- **智能占位符**: 根据选择类型显示相应提示
- **格式说明卡片**: 选择类型后显示格式要求和示例
- **实时验证反馈**: 输入时立即显示是否符合要求

## 🚀 快速创建示例

### 示例1：添加垃圾手机号
1. 选择类型：**Spam Phone Numbers**
2. 输入内容：`+86-13812345678`
3. 选择来源：**Manual Administration**
4. 点击创建 ✅

### 示例2：添加禁用关键词
1. 选择类型：**Prohibited Keywords**
2. 输入内容：`垃圾广告内容`
3. 选择来源：**Manual Administration**
4. 点击创建 ✅

### 示例3：添加恶意IP
1. 选择类型：**Malicious IPs**
2. 输入内容：`192.168.1.100`
3. 选择来源：**System Detection**
4. 点击创建 ✅

## 💡 最佳实践建议

### 1. 类型选择策略
- **确定格式要求时**: 选择对应的专用类型（手机号、IP、邮箱等）
- **内容格式不确定时**: 选择"Prohibited Keywords"（无限制）
- **测试阶段**: 建议先用"Prohibited Keywords"测试功能

### 2. 内容输入技巧
- **查看格式提示**: 选择类型后仔细阅读格式说明
- **参考示例**: 按照显示的示例格式输入
- **实时验证**: 关注输入框的验证状态反馈

### 3. 错误处理
- **格式错误**: 根据错误提示调整内容格式
- **类型选择**: 考虑切换到"Prohibited Keywords"类型
- **重新尝试**: 修正格式后重新提交

## ⚠️ 注意事项

1. **不同类型有不同验证规则**，选择前请确认内容格式
2. **Prohibited Keywords类型无格式限制**，适合任意文本内容
3. **电话号码**必须符合国际格式要求
4. **IP地址**必须是有效的IPv4格式
5. **邮箱地址**必须包含@符号和有效域名

---

**更新时间**: 2025-09-11  
**版本**: v1.0  
**状态**: 已实现并可使用  

有问题请参考此指南，或联系开发团队获取支持。